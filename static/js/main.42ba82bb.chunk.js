(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{32:function(e,t,n){e.exports=n(49)},42:function(e,t,n){},43:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(18),i=n.n(c),o=n(11),s=n(22),l=n(13),u=n(30),d=n(31),p=n(2),m=n(16),b=n.n(m),E=n(19),h=function(e){return{type:"GET_CURRENCIES",currencies:e}},f=function(e,t){return function(){var n=Object(E.a)(b.a.mark((function n(a){var r,c,i;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch("https://economia.awesomeapi.com.br/json/all");case 3:return r=n.sent,n.next=6,r.json();case 6:if(c=n.sent,i=Object.keys(c).filter((function(e){return"USDT"!==e})),"currencies"!==e){n.next=10;break}return n.abrupt("return",a(h(i)));case 10:if("addExpense"!==e){n.next=12;break}return n.abrupt("return",a({type:"ADD_EXPENSE",expenses:t,exchangeRates:c}));case 12:n.next=17;break;case 14:n.prev=14,n.t0=n.catch(0),console.log("Erro encontrado: ".concat(n.t0));case 17:case"end":return n.stop()}}),n,null,[[0,14]])})));return function(e){return n.apply(this,arguments)}}()},v={email:""},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USER_EMAIL":return Object(p.a)(Object(p.a)({},e),{},{email:t.email});default:return e}},O=n(20),j={currencies:[],expenses:[],editBtn:!1,expenseSelected:{}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_CURRENCIES":return Object(p.a)(Object(p.a)({},e),{},{currencies:t.currencies});case"ADD_EXPENSE":return Object(p.a)(Object(p.a)({},e),{},{expenses:[].concat(Object(O.a)(e.expenses),[Object(p.a)(Object(p.a)({},t.expenses),{},{exchangeRates:t.exchangeRates})])});case"REMOVE_EXPENSE":var n=e.expenses.filter((function(e){return e.id!==t.id}));return Object(p.a)(Object(p.a)({},e),{},{expenses:n});case"ACTIVE_EDIT_BUTTON":return Object(p.a)(Object(p.a)({},e),{},{editBtn:!0,expenseSelected:t.selectedExpense});case"DISABLE_EDIT_BUTTON":return Object(p.a)(Object(p.a)({},e),{},{editBtn:!1,expenseSelected:{}});case"EDIT_EXPENSE":var a=e.expenses.length,r=e.expenses.findIndex((function(e){return e.id===t.expense.id})),c=e.expenses.slice(0,r),i=e.expenses.slice(r+1,a),o=Object(p.a)(Object(p.a)({},t.editInfo),{},{id:t.expense.id,exchangeRates:t.expense.exchangeRates}),s=[].concat(Object(O.a)(c),[o],Object(O.a)(i));return Object(p.a)(Object(p.a)({},e),{},{expenses:s,editBtn:!1,expenseSelected:{}});default:return e}},y=Object(l.combineReducers)({user:x,wallet:g}),S=Object(l.createStore)(y,Object(u.composeWithDevTools)(Object(l.applyMiddleware)(d.a))),w=(n(42),n(3)),N=n(15),k=n(4),T=n(5),C=n(7),D=n(6),B=(n(43),function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(){return Object(k.a)(this,n),t.apply(this,arguments)}return Object(T.a)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.type,a=e.value,c=e.placeholder,i=e.onChange;return r.a.createElement("div",{className:"form-floating  m-2"},r.a.createElement("input",{"data-testid":"".concat(t,"-input"),name:t,id:"input-".concat(t),className:"form-control",type:n,placeholder:c,onChange:i,value:a}),r.a.createElement("label",{htmlFor:"input-".concat(t)},c))}}]),n}(a.Component)),R=function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(e){var a;return Object(k.a)(this,n),(a=t.call(this,e)).inputValidation=function(){var e=a.state,t=e.email,n=e.password,r=/^[\w-.]+@([\w-]+\.)+[\w-]{2,4}$/g.test(t),c=n.length>=6;a.setState({btnDisabled:!(r&&c)})},a.inputHandler=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(N.a)({},n,r),(function(){return a.inputValidation()}))},a.loginHandler=function(){var e=a.props,t=e.history;(0,e.sentEmail)(a.state.email),t.push("/carteira")},a.state={email:"",password:"",btnDisabled:!0},a}return Object(T.a)(n,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.password,a=e.btnDisabled;return r.a.createElement("div",{className:"main-container"},r.a.createElement("div",{className:"login-container"},r.a.createElement("h1",{className:"main-title"},"TrybeWallet"),r.a.createElement("div",null,r.a.createElement(B,{name:"email",type:"Text",placeholder:"Email",onChange:this.inputHandler,value:t}),r.a.createElement(B,{name:"password",type:"password",placeholder:"Password",onChange:this.inputHandler,value:n}),r.a.createElement("div",{className:"d-grid col-6 mx-auto"},r.a.createElement("button",{type:"button",className:"btn btn-warning btn-lg cursor-na",onClick:this.loginHandler,disabled:a},"Entrar")))))}}]),n}(r.a.Component),I=Object(o.b)(null,(function(e){return{sentEmail:function(t){return e(function(e){return{type:"GET_USER_EMAIL",email:e}}(t))}}}))(R),_=function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(){var e;Object(k.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).expenseSum=function(){return e.props.expenses.map((function(e){var t=e.value,n=e.currency,a=e.exchangeRates;return t*Number(a[n].ask)})).reduce((function(e,t){return e+t}),0).toFixed(2)},e}return Object(T.a)(n,[{key:"render",value:function(){var e=this.props.email;return r.a.createElement("header",{className:"header-container"},r.a.createElement("h1",{className:"main-title"},"TrybeWallet"),r.a.createElement("div",{className:"header-user-info"},r.a.createElement("span",null,"Email:"," ",r.a.createElement("strong",{"data-testid":"email-field"},e)),r.a.createElement("span",null,"Despesa Total:"," ",r.a.createElement("strong",null,"R$:"," ",r.a.createElement("span",{"data-testid":"total-field"},this.expenseSum()),r.a.createElement("span",{"data-testid":"header-currency-field"},"BRL")))))}}]),n}(a.Component),A=Object(o.b)((function(e){return{email:e.user.email,expenses:e.wallet.expenses}}))(_),F=function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(){var e;Object(k.a)(this,n);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).selectList=function(e,t){return e.map((function(e,n){return r.a.createElement("option",{key:"".concat(n,"-").concat(e),value:e,name:t},e)}))},e}return Object(T.a)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.value,a=e.onChange,c=e.options,i=e.placeholder;return r.a.createElement("div",{className:"form-floating  m-1"},r.a.createElement("select",{"data-testid":"".concat(t,"-input"),id:"".concat(t,"-id"),className:"form-select",name:t,value:n,onChange:a},this.selectList(c,t)),r.a.createElement("label",{htmlFor:"".concat(t,"-id")},i))}}]),n}(a.Component),H=function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(){var e;Object(k.a)(this,n);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).pressEditBtn=function(){var t=Object(E.a)(b.a.mark((function t(n){var a,r,c,i,o;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props,r=a.activeEdition,c=a.disableEdition,i=a.editBtn,o=a.getEditState,!i){t.next=5;break}c(),t.next=8;break;case 5:return t.next=7,r(n);case 7:o();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.renderExpenses=function(){var t=e.props,n=t.expenses,a=t.removeExpenseById,c=t.expenseSelected,i=void 0===c?{id:"none"}:c;return n.map((function(t){var n=t.id,c=t.value,o=t.description,s=t.currency,l=t.method,u=t.tag,d=t.exchangeRates,p=d[s].name,m=Number(d[s].ask).toFixed(2),b=(c*Number(d[s].ask)).toFixed(2),E=[o,u,l,Number(c).toFixed(2),p,m,b,"Real"];return r.a.createElement("tr",{key:n,className:i.id===n?"table-active table-sm":"table-sm"},E.map((function(e,t){return r.a.createElement("td",{key:t},e)})),r.a.createElement("td",null,r.a.createElement("button",{type:"button","data-testid":"edit-btn",className:"btn btn-outline-info btn-sm",onClick:function(){return e.pressEditBtn(t)}},"Editar"),r.a.createElement("button",{type:"button","data-testid":"delete-btn",className:"btn btn-outline-danger btn-sm",onClick:function(){return a(n)}},"Excluir")))}))},e}return Object(T.a)(n,[{key:"render",value:function(){return r.a.createElement("table",{className:"table-container table table-dark table-sm table-hover"},r.a.createElement("thead",null,r.a.createElement("tr",null,["Descri\xe7\xe3o","Tag","M\xe9todo de pagamento","Valor","Moeda","C\xe2mbio utilizado","Valor convertido","Moeda de convers\xe3o","Editar/Excluir"].map((function(e){return r.a.createElement("th",{key:e},e)})))),r.a.createElement("tbody",null,this.renderExpenses()))}}]),n}(a.Component),M=Object(o.b)((function(e){return{expenses:e.wallet.expenses,expenseSelected:e.wallet.expenseSelected,editBtn:e.wallet.editBtn}}),(function(e){return{removeExpenseById:function(t){return e(function(e){return{type:"REMOVE_EXPENSE",id:e}}(t))},activeEdition:function(t){return e({type:"ACTIVE_EDIT_BUTTON",selectedExpense:t})},disableEdition:function(){return e({type:"DISABLE_EDIT_BUTTON"})}}}))(H),U=["Dinheiro","Cart\xe3o de cr\xe9dito","Cart\xe3o de d\xe9bito"],V=["Alimenta\xe7\xe3o","Lazer","Trabalho","Transporte","Sa\xfade"],L=function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(e){var a;return Object(k.a)(this,n),(a=t.call(this,e)).cleanFormsState=function(){a.setState((function(e){return{id:null===e.id?0:e.id+1,value:"",description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o"}}))},a.inputHandler=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(N.a)({},n,r))},a.sentExpenseToStore=function(){(0,a.props.addExpenses)("addExpense",a.state),a.cleanFormsState()},a.editExpenseToStore=function(){var e=a.props,t=e.expenseSelected;(0,e.editingExpense)(t,Object(p.a)(Object(p.a)({},a.state),{},{id:t.id})),a.cleanFormsState()},a.getEditState=function(){var e=a.props.expenseSelected,t=e.value,n=e.description,r=e.currency,c=e.method,i=e.tag;a.setState({value:t,description:n,currency:r,method:c,tag:i})},a.state={id:null,value:"",description:"",currency:"",method:"",tag:""},a}return Object(T.a)(n,[{key:"componentDidMount",value:function(){this.cleanFormsState()}},{key:"render",value:function(){var e=this.state,t=e.value,n=e.description,a=e.currency,c=e.method,i=e.tag,o=this.props,s=o.currencies,l=o.editBtn;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"expense-container"},r.a.createElement(B,{name:"value",type:"number",placeholder:"Valor",onChange:this.inputHandler,value:t}),r.a.createElement(F,{name:"currency",value:a,onChange:this.inputHandler,options:s,placeholder:"Moeda"}),r.a.createElement(F,{name:"method",value:c,onChange:this.inputHandler,options:U,placeholder:"Pagamento"}),r.a.createElement(F,{name:"tag",value:i,onChange:this.inputHandler,options:V,placeholder:"Categoria"}),r.a.createElement(B,{name:"description",type:"text",placeholder:"Descri\xe7\xe3o",onChange:this.inputHandler,value:n}),r.a.createElement("button",{type:"button",className:"btn btn-warning m-2",onClick:l?this.editExpenseToStore:this.sentExpenseToStore},"".concat(l?"Editar":"Adicionar"," despesa"))),r.a.createElement(M,{getEditState:this.getEditState}))}}]),n}(a.Component),P=Object(o.b)((function(e){return{currencies:e.wallet.currencies,editBtn:e.wallet.editBtn,expenseSelected:e.wallet.expenseSelected}}),(function(e){return{addExpenses:function(t,n,a){return e(f(t,n))},editingExpense:function(t,n){return e(function(e,t){return{type:"EDIT_EXPENSE",expense:e,editInfo:t}}(t,n))}}}))(L),X=function(e){Object(C.a)(n,e);var t=Object(D.a)(n);function n(){return Object(k.a)(this,n),t.apply(this,arguments)}return Object(T.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.getApiResponse)("currencies")}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(A,null),r.a.createElement(P,null))}}]),n}(r.a.Component),W=Object(o.b)((function(e){return{email:e.user.email}}),(function(e){return{getApiResponse:function(t){return e(f(t))}}}))(X);var G=function(){return r.a.createElement(w.c,null,r.a.createElement(w.a,{exact:!0,path:"/",component:I}),r.a.createElement(w.a,{exact:!0,path:"/carteira",component:W}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(s.a,{basename:"trybe-project-trybewallet"},r.a.createElement(o.a,{store:S},r.a.createElement(G,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[32,1,2]]]);
//# sourceMappingURL=main.42ba82bb.chunk.js.map